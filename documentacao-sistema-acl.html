<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Documenta√ß√£o Sistema ACL PostgreSQL V2</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .header p {
            color: #7f8c8d;
            font-size: 1.2em;
        }

        .section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .section h2 {
            color: #2c3e50;
            font-size: 1.8em;
            margin-bottom: 20px;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }

        .section h3 {
            color: #34495e;
            font-size: 1.4em;
            margin: 20px 0 15px 0;
            border-left: 4px solid #e74c3c;
            padding-left: 15px;
        }

        .section h4 {
            color: #2c3e50;
            font-size: 1.2em;
            margin: 15px 0 10px 0;
        }

        .file-card {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .file-card h4 {
            color: #e74c3c;
            margin-bottom: 10px;
            font-family: 'Courier New', monospace;
        }

        .file-card p {
            color: #6c757d;
            margin-bottom: 10px;
        }

        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        .permission-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .permission-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .permission-card h4 {
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        .permission-card .value {
            font-size: 2em;
            font-weight: bold;
            margin: 10px 0;
        }

        .architecture-diagram {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }

        .table-info {
            background: #e8f4f8;
            border-left: 4px solid #3498db;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 10px 10px 0;
        }

        .highlight {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }

        .warning {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }

        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }

        .toc {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .toc h3 {
            color: #2c3e50;
            margin-bottom: 15px;
        }

        .toc ul {
            list-style: none;
            padding-left: 0;
        }

        .toc li {
            margin: 8px 0;
        }

        .toc a {
            color: #3498db;
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        .toc a:hover {
            background: #3498db;
            color: white;
        }

        .flow-diagram {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }

        .flow-step {
            background: #3498db;
            color: white;
            padding: 15px;
            margin: 10px;
            border-radius: 10px;
            display: inline-block;
            min-width: 150px;
        }

        .arrow {
            font-size: 2em;
            color: #3498db;
            margin: 0 10px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .stat-card {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .stat-card h4 {
            font-size: 1.3em;
            margin-bottom: 10px;
        }

        .stat-card .number {
            font-size: 2.5em;
            font-weight: bold;
            margin: 10px 0;
        }

        .rls-explanation {
            background: #e8f5e8;
            border: 2px solid #28a745;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .rls-explanation h4 {
            color: #155724;
            margin-bottom: 15px;
        }

        .test-scenario {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
        }

        .test-scenario h4 {
            color: #856404;
            margin-bottom: 10px;
        }

        .user-role {
            background: #f8f9fa;
            border-left: 4px solid #6c757d;
            padding: 15px;
            margin: 10px 0;
            border-radius: 0 10px 10px 0;
        }

        .user-role h5 {
            color: #495057;
            margin-bottom: 8px;
        }

        .permissions-explanation {
            background: #e3f2fd;
            border: 1px solid #bbdefb;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .permissions-explanation h4 {
            color: #1565c0;
            margin-bottom: 15px;
        }

        .bitmask-explanation {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
        }

        .bitmask-explanation h4 {
            color: #3498db;
            margin-bottom: 15px;
        }

        .bitmask-example {
            background: #34495e;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }

        .feature-list {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
        }

        .feature-list ul {
            list-style: none;
            padding-left: 0;
        }

        .feature-list li {
            padding: 8px 0;
            border-bottom: 1px solid #e9ecef;
        }

        .feature-list li:before {
            content: "‚úÖ ";
            margin-right: 10px;
        }

        .feature-list li:last-child {
            border-bottom: none;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .permission-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè¢ Sistema ACL PostgreSQL V2</h1>
            <p>Documenta√ß√£o Completa - Sistema de Controle de Acesso Baseado em Lista</p>
        </div>

        <div class="toc">
            <h3>üìã √çndice</h3>
            <ul>
                <li><a href="#visao-geral">Vis√£o Geral</a></li>
                <li><a href="#arquivos">Estrutura de Arquivos</a></li>
                <li><a href="#sistema-acl">Sistema ACL/RLS</a></li>
                <li><a href="#perfis-roles">Perfis e Roles</a></li>
                <li><a href="#funcionalidades">Funcionalidades Avan√ßadas</a></li>
                <li><a href="#testes">Cen√°rios de Teste</a></li>
                <li><a href="#configuracao">Configura√ß√£o e Setup</a></li>
            </ul>
        </div>

        <div class="section" id="visao-geral">
            <h2>üéØ Vis√£o Geral do Sistema</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <h4>Organiza√ß√µes</h4>
                    <div class="number">3</div>
                    <p>TechCorp, GlobalCorp, StartupXYZ</p>
                </div>
                <div class="stat-card">
                    <h4>√Åreas</h4>
                    <div class="number">9</div>
                    <p>3 por organiza√ß√£o (TI, RH, Financeiro)</p>
                </div>
                <div class="stat-card">
                    <h4>Usu√°rios</h4>
                    <div class="number">39</div>
                    <p>13 por organiza√ß√£o (1 Owner + 6 Managers + 6 Users)</p>
                </div>
                <div class="stat-card">
                    <h4>ACLs</h4>
                    <div class="number">43</div>
                    <p>Permiss√µes granulares configuradas</p>
                </div>
            </div>

            <div class="highlight">
                <h4>üéØ Objetivo Principal</h4>
                <p>Demonstrar um sistema completo de permiss√µes granulares para m√∫ltiplas organiza√ß√µes (multi-tenant) com isolamento total de dados entre empresas, incluindo funcionalidades avan√ßadas como workflows, formul√°rios e assinaturas digitais.</p>
            </div>

            <div class="architecture-diagram">
                <h3>üèóÔ∏è Arquitetura do Sistema</h3>
                <div class="flow-step">Organiza√ß√µes</div>
                <span class="arrow">‚Üì</span>
                <div class="flow-step">√Åreas</div>
                <span class="arrow">‚Üì</span>
                <div class="flow-step">Pastas</div>
                <span class="arrow">‚Üì</span>
                <div class="flow-step">Documentos</div>
                <br><br>
                <div class="flow-step">Workflows</div>
                <span class="arrow">‚Üî</span>
                <div class="flow-step">Formul√°rios</div>
                <span class="arrow">‚Üî</span>
                <div class="flow-step">Assinaturas</div>
            </div>
        </div>

        <div class="section" id="arquivos">
            <h2>üìÅ Estrutura de Arquivos do Reposit√≥rio</h2>

            <div class="file-card">
                <h4>üìÑ README-V2.md</h4>
                <p><strong>Fun√ß√£o:</strong> Documenta√ß√£o principal do projeto</p>
                <p><strong>Conte√∫do:</strong> Vis√£o geral, instru√ß√µes de setup, funcionalidades implementadas, casos de uso e estrutura de tabelas</p>
                <p><strong>Import√¢ncia:</strong> Ponto de entrada para entender o sistema completo</p>
            </div>

            <div class="file-card">
                <h4>üóÑÔ∏è database/create-tables-v2.sql</h4>
                <p><strong>Fun√ß√£o:</strong> Cria√ß√£o de todas as tabelas do sistema</p>
                <p><strong>Conte√∫do:</strong> 50+ tabelas organizadas em m√≥dulos (organiza√ß√µes, usu√°rios, documentos, workflows, formul√°rios, assinaturas, financeiro, ACL)</p>
                <p><strong>Caracter√≠sticas:</strong> Inclui √≠ndices para performance, constraints de integridade e tipos customizados</p>
            </div>

            <div class="file-card">
                <h4>üîê database/acl-setup-v2.sql</h4>
                <p><strong>Fun√ß√£o:</strong> Configura√ß√£o do sistema de permiss√µes e Row Level Security</p>
                <p><strong>Conte√∫do:</strong> Fun√ß√µes PL/pgSQL para verifica√ß√£o de permiss√µes, pol√≠ticas RLS, e sistema de heran√ßa de permiss√µes</p>
                <p><strong>Caracter√≠sticas:</strong> Implementa bitmask de permiss√µes e verifica√ß√£o em cascata</p>
            </div>

            <div class="file-card">
                <h4>üìä database/insert-basic-data.sql</h4>
                <p><strong>Fun√ß√£o:</strong> Inser√ß√£o de dados de teste para demonstra√ß√£o</p>
                <p><strong>Conte√∫do:</strong> 3 organiza√ß√µes, 9 √°reas, 9 usu√°rios, perfis, a√ß√µes do sistema e ACLs b√°sicas</p>
                <p><strong>Caracter√≠sticas:</strong> Dados estruturados para testar todos os cen√°rios de permiss√£o</p>
            </div>

            <div class="file-card">
                <h4>‚öôÔ∏è config/add-workflows-and-acls.sql</h4>
                <p><strong>Fun√ß√£o:</strong> Adi√ß√£o de workflows espec√≠ficos e ACLs granulares</p>
                <p><strong>Conte√∫do:</strong> 10 workflows por √°rea, ACLs espec√≠ficos para documentos e formul√°rios</p>
                <p><strong>Caracter√≠sticas:</strong> Demonstra controle de acesso granular por recurso</p>
            </div>

            <div class="file-card">
                <h4>üîß config/fix-user-permissions.sql</h4>
                <p><strong>Fun√ß√£o:</strong> Corre√ß√£o e refinamento de permiss√µes de usu√°rios</p>
                <p><strong>Conte√∫do:</strong> ACLs espec√≠ficos para usu√°rios comuns acessarem recursos espec√≠ficos</p>
                <p><strong>Caracter√≠sticas:</strong> Mostra como dar acesso granular a usu√°rios sem privil√©gios administrativos</p>
            </div>

            <div class="file-card">
                <h4>üìà database-diagram-v2.dbml</h4>
                <p><strong>Fun√ß√£o:</strong> Diagrama visual da estrutura do banco de dados</p>
                <p><strong>Conte√∫do:</strong> Representa√ß√£o gr√°fica de todas as tabelas e relacionamentos</p>
                <p><strong>Uso:</strong> Para visualizar no dbdiagram.io e entender a arquitetura</p>
            </div>

            <div class="file-card">
                <h4>üöÄ setup-poc-v2.ps1</h4>
                <p><strong>Fun√ß√£o:</strong> Script de setup autom√°tico do sistema</p>
                <p><strong>Conte√∫do:</strong> Verifica√ß√£o de conex√£o, cria√ß√£o do banco, execu√ß√£o dos scripts SQL em ordem</p>
                <p><strong>Caracter√≠sticas:</strong> Setup completo com verifica√ß√£o de erros e feedback visual</p>
            </div>

            <div class="file-card">
                <h4>üß™ tests/test-acl-completo-todas-empresas.sql</h4>
                <p><strong>Fun√ß√£o:</strong> Testes abrangentes do sistema ACL</p>
                <p><strong>Conte√∫do:</strong> 9 cen√°rios de teste cobrindo todos os tipos de usu√°rio e organiza√ß√µes</p>
                <p><strong>Caracter√≠sticas:</strong> Demonstra isolamento entre organiza√ß√µes e heran√ßa de permiss√µes</p>
            </div>
        </div>

        <div class="section" id="sistema-acl">
            <h2>üõ°Ô∏è Sistema ACL/RLS - Controle de Acesso</h2>

            <div class="rls-explanation">
                <h4>üîí Row Level Security (RLS)</h4>
                <p>O sistema implementa Row Level Security do PostgreSQL para garantir que usu√°rios s√≥ vejam dados aos quais t√™m permiss√£o. As pol√≠ticas RLS s√£o aplicadas automaticamente em todas as consultas.</p>
            </div>

            <div class="permissions-explanation">
                <h4>üîë Sistema de Permiss√µes por Bitmask</h4>
                <p>O sistema usa um bitmask de 5 bits para representar permiss√µes, permitindo combina√ß√µes eficientes:</p>
            </div>

            <div class="permission-grid">
                <div class="permission-card">
                    <h4>READ</h4>
                    <div class="value">1</div>
                    <p>Leitura de dados</p>
                </div>
                <div class="permission-card">
                    <h4>WRITE</h4>
                    <div class="value">2</div>
                    <p>Escrita/Modifica√ß√£o</p>
                </div>
                <div class="permission-card">
                    <h4>APPROVE</h4>
                    <div class="value">4</div>
                    <p>Aprova√ß√£o de documentos</p>
                </div>
                <div class="permission-card">
                    <h4>SHARE</h4>
                    <div class="value">8</div>
                    <p>Compartilhamento</p>
                </div>
                <div class="permission-card">
                    <h4>DELETE</h4>
                    <div class="value">16</div>
                    <p>Exclus√£o de dados</p>
                </div>
                <div class="permission-card">
                    <h4>FULL</h4>
                    <div class="value">31</div>
                    <p>Todas as permiss√µes</p>
                </div>
            </div>

            <div class="bitmask-explanation">
                <h4>üí° Como Funciona o Bitmask</h4>
                <p>As permiss√µes s√£o combinadas usando opera√ß√µes bit a bit:</p>
                <div class="bitmask-example">
                    <p>READ + WRITE = 1 + 2 = 3 (bin√°rio: 00011)</p>
                    <p>READ + WRITE + APPROVE = 1 + 2 + 4 = 7 (bin√°rio: 00111)</p>
                    <p>Todas as permiss√µes = 1 + 2 + 4 + 8 + 16 = 31 (bin√°rio: 11111)</p>
                </div>
                <p>Para verificar se um usu√°rio tem uma permiss√£o espec√≠fica:</p>
                <div class="bitmask-example">
                    <p>if (user_perms & 1) == 1 then user_can_read = true</p>
                    <p>if (user_perms & 2) == 2 then user_can_write = true</p>
                </div>
            </div>

            <div class="table-info">
                <h4>üìã Tabela ACL</h4>
                <p><strong>Estrutura:</strong></p>
                <ul>
                    <li><code>subject_id</code> - ID do usu√°rio</li>
                    <li><code>object_type</code> - Tipo do recurso (organization, area, folder, document, form, workflow)</li>
                    <li><code>object_id</code> - ID do recurso espec√≠fico</li>
                    <li><code>perms</code> - Bitmask de permiss√µes</li>
                </ul>
            </div>

            <div class="highlight">
                <h4>üîÑ Heran√ßa de Permiss√µes</h4>
                <p>O sistema implementa heran√ßa em cascata: se um usu√°rio tem permiss√£o em uma organiza√ß√£o, automaticamente herda permiss√µes em suas √°reas, pastas e documentos. A verifica√ß√£o segue a hierarquia:</p>
                <p><strong>Organization ‚Üí Area ‚Üí Folder ‚Üí Document</strong></p>
            </div>
        </div>

        <div class="section" id="perfis-roles">
            <h2>üë• Sistema de Perfis e Roles</h2>

            <div class="user-role">
                <h5>üëë Owner (Administrador)</h5>
                <p><strong>Permiss√µes:</strong> Todas (31) - Acesso total √† organiza√ß√£o</p>
                <p><strong>Responsabilidades:</strong> Gerenciar usu√°rios, configurar permiss√µes, acesso a todos os recursos</p>
                <p><strong>Exemplo:</strong> Admin TechCorp pode ver e modificar tudo da TechCorp</p>
            </div>

            <div class="user-role">
                <h5>üë®‚Äçüíº Manager (Gerente)</h5>
                <p><strong>Permiss√µes:</strong> READ + WRITE + APPROVE (7) - Acesso total √† √°rea espec√≠fica</p>
                <p><strong>Responsabilidades:</strong> Gerenciar documentos da √°rea, aprovar workflows, supervisionar usu√°rios</p>
                <p><strong>Exemplo:</strong> Manager TI TechCorp gerencia apenas a √°rea de Desenvolvimento</p>
            </div>

            <div class="user-role">
                <h5>üë§ User (Usu√°rio)</h5>
                <p><strong>Permiss√µes:</strong> READ + WRITE (3) - Acesso b√°sico com permiss√µes espec√≠ficas</p>
                <p><strong>Responsabilidades:</strong> Trabalhar com documentos espec√≠ficos, participar de workflows</p>
                <p><strong>Exemplo:</strong> User TI TechCorp acessa apenas documentos espec√≠ficos com ACL direto</p>
            </div>

            <div class="feature-list">
                <h4>üîß Funcionalidades do Sistema de Perfis</h4>
                <ul>
                    <li>Associa√ß√£o usu√°rio-organiza√ß√£o com perfil espec√≠fico</li>
                    <li>Associa√ß√£o usu√°rio-√°rea com perfil espec√≠fico</li>
                    <li>Sistema de a√ß√µes do sistema (read, write, approve, share, delete)</li>
                    <li>Associa√ß√£o perfil-a√ß√µes para controle granular</li>
                    <li>Suporte a m√∫ltiplas organiza√ß√µes por usu√°rio</li>
                    <li>Isolamento total entre organiza√ß√µes</li>
                </ul>
            </div>

            <div class="test-scenario">
                <h4>üß™ Cen√°rio de Teste: Isolamento entre Organiza√ß√µes</h4>
                <p><strong>Objetivo:</strong> Verificar se usu√°rios de uma organiza√ß√£o n√£o veem dados de outras</p>
                <p><strong>Teste:</strong> Usu√°rio da TechCorp tenta acessar dados da GlobalCorp</p>
                <p><strong>Resultado Esperado:</strong> Acesso negado - dados n√£o aparecem nas consultas</p>
            </div>
        </div>

        <div class="section" id="funcionalidades">
            <h2>üöÄ Funcionalidades Avan√ßadas</h2>

            <div class="feature-list">
                <h4>üìã Formul√°rios Din√¢micos (Intake)</h4>
                <ul>
                    <li>Cria√ß√£o de formul√°rios com perguntas configur√°veis</li>
                    <li>Tipos de pergunta: texto, m√∫ltipla escolha, data, etc.</li>
                    <li>Respostas estruturadas em JSON</li>
                    <li>Integra√ß√£o com workflows de aprova√ß√£o</li>
                    <li>Valida√ß√£o de dados de entrada</li>
                </ul>
            </div>

            <div class="feature-list">
                <h4>üîÑ Workflows Avan√ßados</h4>
                <ul>
                    <li>Etapas de aprova√ß√£o configur√°veis</li>
                    <li>Aprovadores m√∫ltiplos por etapa</li>
                    <li>Cards de workflow para acompanhamento</li>
                    <li>Lembretes autom√°ticos</li>
                    <li>Integra√ß√£o com formul√°rios e documentos</li>
                    <li>Controle de status e progresso</li>
                </ul>
            </div>

            <div class="feature-list">
                <h4>‚úçÔ∏è Assinaturas Digitais</h4>
                <ul>
                    <li>Integra√ß√£o com provedores externos</li>
                    <li>Signat√°rios ordenados</li>
                    <li>Controle de status de assinatura</li>
                    <li>Notifica√ß√µes por WhatsApp</li>
                    <li>Qualifica√ß√µes de signat√°rios</li>
                </ul>
            </div>

            <div class="feature-list">
                <h4>üí∞ Sistema Financeiro</h4>
                <ul>
                    <li>Categorias de entradas financeiras</li>
                    <li>Controle de receitas e despesas</li>
                    <li>Vincula√ß√£o com documentos</li>
                    <li>Controle de datas de vencimento</li>
                    <li>M√©todos de pagamento</li>
                </ul>
            </div>

            <div class="feature-list">
                <h4>üìä Auditoria Completa</h4>
                <ul>
                    <li>Log de todas as a√ß√µes dos usu√°rios</li>
                    <li>Estados antes e depois das modifica√ß√µes</li>
                    <li>Rastreabilidade total de mudan√ßas</li>
                    <li>Identifica√ß√£o de usu√°rio e timestamp</li>
                    <li>Dados em formato JSON para flexibilidade</li>
                </ul>
            </div>

            <div class="highlight">
                <h4>üè¢ Multi-tenancy</h4>
                <p>O sistema garante isolamento total entre organiza√ß√µes. Usu√°rios de uma empresa n√£o conseguem ver, acessar ou modificar dados de outras empresas, mesmo que tenham permiss√µes administrativas.</p>
            </div>
        </div>

        <div class="section" id="testes">
            <h2>üß™ Cen√°rios de Teste Implementados</h2>

            <div class="test-scenario">
                <h4>üëë Teste 1: Admin TechCorp</h4>
                <p><strong>Usu√°rio:</strong> admin@techcorp.com</p>
                <p><strong>Perfil:</strong> Owner</p>
                <p><strong>Verifica√ß√µes:</strong> Acesso total √† TechCorp, todas as √°reas, documentos, formul√°rios e workflows</p>
            </div>

            <div class="test-scenario">
                <h4>üë®‚Äçüíº Teste 2: Manager TI TechCorp</h4>
                <p><strong>Usu√°rio:</strong> ti.manager@techcorp.com</p>
                <p><strong>Perfil:</strong> Manager</p>
                <p><strong>Verifica√ß√µes:</strong> Acesso total √† √°rea de Desenvolvimento, documentos e workflows da √°rea</p>
            </div>

            <div class="test-scenario">
                <h4>üë§ Teste 3: User TI TechCorp</h4>
                <p><strong>Usu√°rio:</strong> ti.user@techcorp.com</p>
                <p><strong>Perfil:</strong> User</p>
                <p><strong>Verifica√ß√µes:</strong> Acesso apenas a documentos e workflows espec√≠ficos com ACL direto</p>
            </div>

            <div class="test-scenario">
                <h4>üîí Teste 4-9: Outras Organiza√ß√µes</h4>
                <p><strong>Organiza√ß√µes:</strong> GlobalCorp e StartupXYZ</p>
                <p><strong>Verifica√ß√µes:</strong> Mesmos cen√°rios para verificar isolamento entre empresas</p>
                <p><strong>Resultado:</strong> Cada organiza√ß√£o tem seus pr√≥prios usu√°rios, √°reas e recursos</p>
            </div>

            <div class="success">
                <h4>‚úÖ Resultados dos Testes</h4>
                <p>Todos os testes demonstram:</p>
                <ul>
                    <li>Isolamento total entre organiza√ß√µes</li>
                    <li>Heran√ßa correta de permiss√µes</li>
                    <li>Controle granular de acesso</li>
                    <li>Funcionamento do sistema RLS</li>
                    <li>Efici√™ncia do sistema de bitmask</li>
                </ul>
            </div>
        </div>

        <div class="section" id="configuracao">
            <h2>‚öôÔ∏è Configura√ß√£o e Setup</h2>

            <div class="warning">
                <h4>‚ö†Ô∏è Pr√©-requisitos</h4>
                <ul>
                    <li>PostgreSQL 12+ rodando na porta 5433</li>
                    <li>Usu√°rio 'postgres' com permiss√µes de administrador</li>
                    <li>PowerShell para execu√ß√£o do script de setup</li>
                </ul>
            </div>

            <div class="code-block">
                <h4>üöÄ Setup Autom√°tico (Recomendado)</h4>
                <p>Execute o script PowerShell:</p>
                <code>.\setup-poc-v2.ps1</code>
                
                <p>O script ir√°:</p>
                <ul>
                    <li>Verificar conex√£o com PostgreSQL</li>
                    <li>Criar o banco 'acl_poc_v2'</li>
                    <li>Executar todos os scripts SQL em ordem</li>
                    <li>Verificar o setup com contadores</li>
                </ul>
            </div>

            <div class="code-block">
                <h4>üîß Setup Manual</h4>
                <p>Execute os scripts em ordem:</p>
                <code>
                    psql -h localhost -p 5433 -U postgres -d acl_poc_v2 -f database/create-tables-v2.sql<br>
                    psql -h localhost -p 5433 -U postgres -d acl_poc_v2 -f database/acl-setup-v2.sql<br>
                    psql -h localhost -p 5433 -U postgres -d acl_poc_v2 -f database/insert-basic-data.sql<br>
                    psql -h localhost -p 5433 -U postgres -d acl_poc_v2 -f config/add-workflows-and-acls.sql<br>
                    psql -h localhost -p 5433 -U postgres -d acl_poc_v2 -f config/fix-user-permissions.sql
                </code>
            </div>

            <div class="code-block">
                <h4>üß™ Executar Testes</h4>
                <p>Para testar o sistema completo:</p>
                <code>psql -h localhost -p 5433 -U postgres -d acl_poc_v2 -f tests/test-acl-completo-todas-empresas.sql</code>
            </div>

            <div class="success">
                <h4>‚úÖ Verifica√ß√£o do Setup</h4>
                <p>Ap√≥s o setup, verifique se os dados foram inseridos corretamente:</p>
                <ul>
                    <li>3 organiza√ß√µes</li>
                    <li>9 √°reas</li>
                    <li>9 usu√°rios</li>
                    <li>43 ACLs</li>
                </ul>
            </div>

            <div class="highlight">
                <h4>üîç Pr√≥ximos Passos</h4>
                <ol>
                    <li>Conecte ao banco 'acl_poc_v2' no DBeaver ou pgAdmin</li>
                    <li>Explore as tabelas e dados criados</li>
                    <li>Execute os testes de permiss√µes</li>
                    <li>Use o diagrama em database-diagram-v2.dbml</li>
                    <li>Experimente diferentes cen√°rios de acesso</li>
                </ol>
            </div>
        </div>

        <div class="section">
            <h2>üìö Conclus√£o</h2>
            <div class="success">
                <h4>üéâ Sistema ACL V2 Completo!</h4>
                <p>Este sistema demonstra uma implementa√ß√£o robusta e escal√°vel de controle de acesso usando PostgreSQL, com:</p>
                <ul>
                    <li>Multi-tenancy com isolamento total</li>
                    <li>Hierarquia de permiss√µes flex√≠vel</li>
                    <li>Row Level Security nativo do PostgreSQL</li>
                    <li>Sistema de bitmask eficiente</li>
                    <li>Funcionalidades avan√ßadas (workflows, formul√°rios, assinaturas)</li>
                    <li>Auditoria completa</li>
                    <li>Testes abrangentes</li>
                </ul>
                <p><strong>O sistema est√° pronto para ser usado como base para aplica√ß√µes empresariais que precisam de controle de acesso granular e seguro.</strong></p>
            </div>
        </div>
    </div>
</body>
</html>
